(this["webpackJsonptask-app"]=this["webpackJsonptask-app"]||[]).push([[0],{182:function(e,t,n){e.exports=n(441)},441:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(34),c=n.n(o),s=n(37),l=n(21),u=n(170),i=n.n(u),d=n(171),p=n(16),m={todos:[],tasks:[]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TODOS":return Object(p.a)(Object(p.a)({},e),{},{todos:t.todos});case"ADD_TASK":case"ADD_COLUMN":case"DELETE_COLUMN":case"DELETE_TASK":return Object(p.a)({},e);case"PATCH_COLUMN":return Object(p.a)(Object(p.a)({},e),{},{todos:t.order2});case"CHANGE_COLUMNS":return Object(p.a)({},e);default:return e}},h=Object(l.c)({todo:f}),b=Object(l.c)({todoApp:h}),g=[d.a,i()()],O=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,k=Object(l.e)(b,{},O(l.a.apply(void 0,g))),v=n(32),E=n.n(v),j=n(51),w=n(111),C=n(42),x=n(43),S=n(45),y=n(44),D=n(29),_=(n(192),n(46)),T=n(30);function I(){var e=Object(D.a)(["\n    border: 1px solid lightgrey;\n    border-radius: 5px;\n    overflow: hidden;\ntext-overflow: ellipsis;\n    padding: 8px;\n    margin-bottom: 8px;\n    background-color: ",";\n"]);return I=function(){return e},e}var N=T.a.div(I(),(function(e){return e.color?e.color:"white"})),A=function(e){Object(S.a)(n,e);var t=Object(y.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this;return console.log(this.props.task.color),r.a.createElement(_.b,{draggableId:this.props.task._id,index:this.props.index},(function(t,n){return r.a.createElement(N,Object.assign({},t.draggableProps,t.dragHandleProps,{color:e.props.task.color,ref:t.innerRef,isDragging:n.isDragging}),e.props.task.name)}))}}]),n}(r.a.Component);function F(){var e=Object(D.a)(["\n    padding: 8px;\n    transition: background-color 0.2s ease;\n    background-color: ",";\n    flex-grow: 1;\n    min-height: 100px;\n"]);return F=function(){return e},e}function L(){var e=Object(D.a)(["\n    padding: 8px;\n"]);return L=function(){return e},e}function P(){var e=Object(D.a)(["\n    margin: 8px;\n    border: 1px solid lightgrey;\n    background-color: white;\n    border-radius: 2px;\n    min-width: 250px;\n    display: flex;\n    flex-direction: column;\n"]);return P=function(){return e},e}var M=T.a.div(P()),U=T.a.h3(L()),R=T.a.div(F(),(function(e){return e.color?e.color:"white"})),H=function(e){Object(S.a)(n,e);var t=Object(y.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(_.b,{draggableId:this.props.column._id,index:this.props.index},(function(t){return r.a.createElement(M,Object.assign({},t.draggableProps,{ref:t.innerRef}),r.a.createElement(U,t.dragHandleProps,e.props.column.name),r.a.createElement(_.c,{droppableId:e.props.column._id,isDropDisabled:e.props.isDropDisabled,type:"task"},(function(t,n){return r.a.createElement(R,Object.assign({ref:t.innerRef},t.droppableProps,{isDraggingOver:n.isDraggingOver,color:e.props.column.color}),e.props.column.tasks.map((function(e,t){return r.a.createElement(A,{key:e._id,task:e,index:t})})),t.placeholder)})))}))}}]),n}(r.a.Component),K=n(40),G=n.n(K),J="https://cryptic-beach-01154.herokuapp.com",X=function(){return function(){var e=Object(j.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("".concat(J,"/todo")).then((function(e){t({type:"GET_TODOS",todos:e.data})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z=function(e){return function(t){G.a.post("".concat(J,"/collums"),e).then((function(n){t({type:"ADD_COLUMN",column:e}),t(X())}))}},B=n(107),V=n(462),q=n(461),Q=n(459),W=n(460),Y=n(175);function Z(){var e=Object(D.a)(["\n  margin: 0em 0 0.2em 0;\n"]);return Z=function(){return e},e}function $(){var e=Object(D.a)(["\n  margin: 0.5em;\n  float: right;\n"]);return $=function(){return e},e}function ee(){var e=Object(D.a)(["\n  margin: 0 0.5em 1em 0.5em;\n"]);return ee=function(){return e},e}function te(){var e=Object(D.a)(["\n  padding: 1em;\n  margin: 1em;\n"]);return te=function(){return e},e}var ne=T.a.div(te()),ae=T.a.div(ee()),re=T.a.div($()),oe=T.a.div(Z()),ce=function(e){Object(S.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(C.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={taskIsShown:!1,columnIsShown:!1,task:{owner:"",name:"",color:"#FFFFFF",status:!1,desk:""},collum:{name:"",color:"#FFFFFF"}},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.todos[0].collums.map((function(e){return{label:e.name,id:e._id}}));return r.a.createElement(ne,null,r.a.createElement(V.a,{isShown:this.state.taskIsShown,title:"Add new task",onCloseComplete:function(){return e.setState({taskIsShown:!1})},hasFooter:!1},r.a.createElement(ae,null,r.a.createElement(oe,null,"Column"),r.a.createElement(q.a,{items:t,itemToString:function(e){return e?e.label:""},onChange:function(t){return e.setState({task:Object(p.a)(Object(p.a)({},e.state.task),{},{owner:t.id})})},placeholder:"Select the column"})),r.a.createElement(ae,null,r.a.createElement(oe,null,"Name"),r.a.createElement(Q.a,{onChange:function(t){return e.setState({task:Object(p.a)(Object(p.a)({},e.state.task),{},{name:t.target.value})})},value:this.state.task.name,placeholder:"Enter the task name"})),r.a.createElement(ae,null,r.a.createElement(oe,null,"Description"),r.a.createElement(W.a,{onChange:function(t){return e.setState({task:Object(p.a)(Object(p.a)({},e.state.task),{},{desk:t.target.value})})},value:this.state.task.desk,placeholder:"Enter the task description"})),r.a.createElement(ae,null,r.a.createElement(oe,null,"Color"),r.a.createElement(B.TwitterPicker,{color:this.state.task.color,triangle:"hide",onChangeComplete:function(t){return e.setState({task:Object(p.a)(Object(p.a)({},e.state.task),{},{color:t.hex})})}})),r.a.createElement(re,null,r.a.createElement(Y.a,{onClick:function(){e.props.addNewTask(e.state.task),e.setState({taskIsShown:!1})}},"Submit"))),r.a.createElement(V.a,{isShown:this.state.columnIsShown,title:"Add new column",onCloseComplete:function(){return e.setState({columnIsShown:!1})},hasFooter:!1},r.a.createElement(ae,null,r.a.createElement(oe,null,"Name"),r.a.createElement(Q.a,{onChange:function(t){return e.setState({collum:Object(p.a)(Object(p.a)({},e.state.collum),{},{name:t.target.value})})},value:this.state.collum.name,placeholder:"Enter the column name"})),r.a.createElement(ae,null,r.a.createElement(oe,null,"Color"),r.a.createElement(B.TwitterPicker,{color:this.state.collum.color,triangle:"hide",onChangeComplete:function(t){return e.setState({collum:Object(p.a)(Object(p.a)({},e.state.collum),{},{color:t.hex})})}})),r.a.createElement(re,null,r.a.createElement(Y.a,{onClick:function(){e.props.addNewColumn(e.state.collum),e.setState({columnIsShown:!1})}},"Submit"))),r.a.createElement(Y.a,{onClick:function(){return e.setState({taskIsShown:!0})}},"New task"),r.a.createElement(Y.a,{marginLeft:"1em",onClick:function(){return e.setState({columnIsShown:!0})}},"New column"))}}]),n}(a.Component),se=Object(s.b)(null,{addNewTask:function(e){return function(t){G.a.post("".concat(J,"/tasks"),e).then((function(n){t({type:"ADD_TASK",task:e}),t(X())}))}},addNewColumn:z})(ce),le=n(112);function ue(){var e=Object(D.a)(["\n  display: flex;\n"]);return ue=function(){return e},e}var ie=T.a.div(ue()),de=function(e){Object(S.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(C.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={todos:null},e.onDragEnd=function(t){var n=t.destination,a=t.source,r=t.type;if(n&&(n.droppableId!==a.droppableId||n.index!==a.index))if("column"!==r)if(a.droppableId!==n.droppableId){var o=e.state.todos[0].collums.find((function(e){return e._id===a.droppableId})),c=e.state.todos[0].collums.find((function(e){return e._id===n.droppableId})),s=o.tasks,l=c.tasks,u=s.splice(a.index,1),i=Object(w.a)(u,1)[0];l.splice(n.index,0,i),e.props.patchColumns({sourceColumn:o,destColumn:c})}else{var d=e.state.todos[0].collums.find((function(e){return e._id===a.droppableId})),m=d.tasks,f=m.splice(a.index,1),h=Object(w.a)(f,1)[0];m.splice(n.index,0,h),e.props.changeColumns(d)}else{var b=Array.from(e.state.todos[0].collums);b.splice(a.index,1),b.splice(n.index,0,e.state.todos[0].collums[a.index]);var g={0:Object(p.a)(Object(p.a)({},e.state.todos),{},{collums:b})};e.props.patchColumn(b,g)}},e}return Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=Object(j.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getTodos();case 2:this.setState({todos:this.props.app.todo.todos});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null!==this.state.todos&&0!==this.state.todos.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(se,{todos:this.state.todos}),r.a.createElement(le.a,{display:"flex",padding:"1em",margin:"1em",background:"tint2",borderRadius:3,width:"100%-2em",overflow:"auto"},r.a.createElement(_.a,{onDragEnd:this.onDragEnd},r.a.createElement(_.c,{droppableId:"all-columns",direction:"horizontal",type:"column"},(function(t){return r.a.createElement(ie,Object.assign({ref:t.innerRef},t.droppableProps),e.state.todos[0].collums.map((function(e,t){var n=e;return r.a.createElement(H,{key:n._id,column:n,tasks:n.tasks,index:t})})),t.placeholder)}))))):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.app.todo.todos!==t.todos?{todos:e.app.todo.todos}:null}}]),n}(r.a.Component),pe=Object(s.b)((function(e){return{app:e.todoApp}}),{getTodos:X,addNewColumn:z,deleteColumn:function(e){return function(t){G.a.delete("".concat(J,"/collums"),{data:{id:e}}).then((function(n){t({type:"DELETE_COLUMN",id:e}),t(X())}))}},deleteTask:function(e){return function(t){G.a.delete("".concat(J,"/tasks"),{data:{id:e}}).then((function(n){t({type:"DELETE_TASK",id:e}),t(X())}))}},changeColumns:function(e){return function(){var t=Object(j.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G.a.put("".concat(J,"/collums"),e).then((function(){n(X())})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},patchColumn:function(e,t){return function(){var n=Object(j.a)(E.a.mark((function n(a){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,G.a.patch("".concat(J,"/todo"),e).then((function(){a(X())})).catch((function(e){return console.log(e)})),a({type:"PATCH_COLUMN",order2:t});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},patchColumns:function(e){var t=e.sourceColumn,n=e.destColumn;return function(){var e=Object(j.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.patch("".concat(J,"/collums"),{sourceColumn:t,destColumn:n}).then((function(){a(X())})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(de);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{store:k},r.a.createElement(pe,null))),document.getElementById("root"))}},[[182,1,2]]]);
//# sourceMappingURL=main.82f90644.chunk.js.map